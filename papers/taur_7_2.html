<html>
<head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<title>Journal of Statistics Education, V7N2: Taur</title>

<h1>A Teaching Tool for Nonlinear Regression: <i>Visual Fit</i></h1>

<p>Ying Taur<br>
New York Medical College</p>

<p>Charles E. McCulloch<br>
Cornell University</p>

<p>
<cite>Journal of Statistics Education</cite> v.7, n.2 (1999)


<p>
Copyright (c) 1999 by Ying Taur and Charles E. McCulloch, all rights
reserved.  This text may be freely shared among
individuals, but it may not be republished in any medium
without express written consent from the authors and advance
notification of the editor.
</p>
<hr></p>

<strong><p>Key Words:</strong>
Interactive; Java applet; Web-based.

<p>

<h2>Abstract</h2>

<p>We describe a Java applet that allows users to see and
learn the fitting of regression models in a manner that is
both visual and interactive, as well as consonant for
linear and nonlinear models. In addition, this program
familiarizes users with the fact that many different
parameterizations exist for a single function, and it
provides insight about the relationship between these
models. Called <i>Visual Fit</i>, this program draws
scatterplots of data and allows users to fit various
nonlinear models to the data. The program can also provide
least squares estimates or true population parameters for
comparison with the estimates made by the user. We discuss
what types of parameters can be represented in a visually
obvious way and which cannot. <i>Visual Fit</i> may be
useful for both introductory statistics classes and
higher-level courses.  <i>Visual Fit</i> is available at 
<a href="visualfit.html">
http://www.amstat.org/publications/jse/secure/v7n2/visualfit.html
</a></p>

<h1>1. Introduction</h1> 

<p>1 Nonlinear least squares regression
is the fitting of a model to data, where the model
parameters are related to the explanatory variable(s) in a
fashion that is not linear. On a conceptual level, nonlinear
least squares works primarily the same way as linear least
squares; estimates of model parameters are obtained by
finding the set of parameters that minimizes the sum of
squared deviations between the data and model (hence the
name least squares). Nonlinear least squares is more
complicated only because it is usually not possible to
obtain these estimates algebraically; closed-form
expressions for nonlinear least squares estimators are
often impossible to find. Instead, numerical search
procedures are typically used, which arrive at least
squares parameter estimates through computationally
intensive methods. Therefore, nonlinear least squares
computations are almost always done by computer.</p>

<p>
2 This extra complication is one of the main reasons why many
statistics courses and textbooks have little or no coverage
of nonlinear least squares (e.g., <a href="#ott">Ott 1993</a>, 
<a href="#snedecor">Snedecor and
Cochran 1989</a>, <a href="#moore">Moore and McCabe 1993</a>, 
<a href="#devore">Devore and Peck 1993</a>).
As a result, nonlinear regression is often neglected in
statistics courses, even though nonlinear regression is
widely used in applied research. Many statistics students
therefore have little exposure to this kind of regression
and might regard nonlinear regression as something of an
enigma.</p>

<p>
3 Currently there exist interactive applications that allow
regression concepts to be learned on the computer. An
example is ActivStats, developed by 
<a href="gate/taurlink1.html">Data Description, Inc.</a>
Users can explore straight-line regression with the
ActivStats &quot;Least Squares Tool.&quot; In this program, users
learn about the least squares criterion for fitting lines
by dragging the line's slope and intercept with the mouse.
The equation and sum of squared residuals are displayed and
automatically updated. ActivStats can then show the true
least squares line for comparison.</p>

<p>4 The aim of this project was to develop a computer
program that extended this method of teaching least squares
fitting to encompass nonlinear models, as well as linear
models. This lets users see least squares fitting on a
broader scale -- one which is not restricted only to
straight-line regression. In addition, this program
familiarizes users with the fact that many different
parameterizations exist for a function, and it provides
some insight about the relationship between these
models.</p>

<p>5 This program, called <i>Visual Fit</i>, draws
scatterplots of data and allows users to fit various linear
and nonlinear models to the data. The program itself also
fits the data by making use of a nonlinear least squares
algorithm. <i>Visual Fit</i> has been developed in order to
allow students to have a good visual sense for nonlinear
least squares and to see that nonlinear regression and
linear regression are conceptually the same. <i>Visual
Fit</i> was written in Java (see <i>Program Usage</i>
section) in order to allow compatibility with various
platforms, as well as for easy portability to the Web.</p>

<p>6 <i>Visual Fit</i> can be useful for both introductory
statistics classes and higher-level courses. Part of
<i>Visual Fit</i>'s value lies in its ability to allow
students to perceive the <i>overall</i> concept of least
squares.  Furthermore, the material taught by <i>Visual
Fit</i> need not add to an already over-packed curriculum;
it can certainly be used as a supplemental tool. Students
can be free to explore least squares on their own using
<i>Visual Fit</i>.</p>

<p>
7 This paper consists of the following sections:

<p><ul>
<li><i>Program Performance</i> describes how the program works in general.
<li><i>Nonlinear Least Squares Algorithm</i> discusses the method used 
by the program to find least squares estimates.
<li><i>Regression Functions in the Program</i> describes what models and 
parameterizations were used in the program and how they were represented.
<li><i>Program Structure</i> describes the basic class structure of the 
program.
<li><i>Program Usage</i> contains instructions on using the program.
<li><i>Discussion and Conclusions</i> describes some interesting and 
important findings.
</ul>

<p>

<h1>2. Program Performance</h1> 

<p>8 The basic operation of this
program is as follows: generate a set of data using a
specific regression model with randomly selected parameter
values plus error. This dataset is displayed along with a
&quot;trial fit.&quot; The parameters can then be controlled by the
user in an attempt to best fit the data. These parameters
may be modified either by inputting new parameter values
through the keyboard or by graphically manipulating
&quot;parameter box&quot; representations using a mouse. We will
have more to say about the visual representation of a
parameter in later sections. Different functions and
parameterizations may be used to fit the data. The
functions and their parameterizations, as well as the
methods of representation, are described in further detail
in the section entitled <i>Regression Functions in
the Program</i>.</p>

<p>
9 The program responds to any change in parameters by
redrawing the trial fit and calculating the new sum of
squared differences between the data and the
user-controlled function. When the user has finished
fitting the model, the actual least squares estimate (see
the next section) or the true population parameters and the
user's guess are then displayed simultaneously for
comparison.</p>

<p>

<h1>3. Nonlinear Least Squares Algorithm</h1> 

<p>10 In this program, the method used to calculate least
squares estimates is the <i>Levenberg-Marquardt method</i>,
also known as the <i>Marquardt method</i> (<a href="#press">Press, Teukolsky, Vetterling, and Flannery
1992</a>). This method works well in practice and is a
commonly used technique for nonlinear least squares. 

<p>
11 For a specified model <i>f</i> with parameters 
<b>a</b> to be estimated, we will use the following notation:
<br><p></p>
<div align="CENTER">
<img width="280" height="31" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img2.gif" alt="\begin{displaymath}Y_i=f(X_i,\textbf{a})+\varepsilon_i 
\hspace{0.2in}\textbf{a}'=[a_1,...,a_M],\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
where <i>Y</i><sub><i>i</i></sub> is the value of the response 
variable in the <i>i</i><sup><i>th</i></sup> observation,
<i>X</i><sub><i>i</i></sub> is the value of the predictor variable 
in the <i>i</i><sup><i>th</i></sup> observation,
and 
<img width="18" height="30" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img3.gif" alt="$\varepsilon_i$">
is the error term in the <i>i</i><sup><i>th</i></sup> trial.
<i>Visual Fit</i> will, with each new iteration of the algorithm, 
evaluate the sum of squared differences between the data and the model:
<br><p></p>
<div align="CENTER">
<img width="221" height="55" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img4.gif" alt="\begin{displaymath}Q(\textbf{a}_p)=\sum_{i=1}^n 
(Y_i-f(X_i,\textbf{a}_p))^2,\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
where 
<b>a</b><sub><i>p</i></sub> is the parameter estimates for the
<i>p</i><sup><i>th</i></sup> iteration. For the initial guess
<b>a</b><sub>0</sub>, <i>Visual Fit</i> uses the true values of the
parameters that were used to generate the dataset.</p>

<p>
12 A rule for termination of the routine is also necessary. This
program uses the following condition for stopping (suggested by <a href="#kennedy">Kennedy and Gentle 1980)</a>:
<br><p></p>
<div align="CENTER">
<img width="192" height="32" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img5.gif" alt="\begin{displaymath}0\le Q(\textbf{a}_p)-Q(\textbf{a}_{p+1})<\tau\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
That is, terminate at the <i>p</i>+1<sup><i>th</i></sup> iteration whenever 
the sum of squares decreases by an amount less than some tolerance <img width="14" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img6.gif" alt="$\tau$">.
Other stopping rules (<a href="#kennedy">Kennedy and Gentle 1980</a>) 
considered were:
<br><p></p>
<div align="CENTER">
<img width="99" height="40" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img7.gif" alt="\begin{displaymath}\max_k \vert\beta_k\vert <\tau,\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
which terminates when the gradient of the sum of squares with respect 
to each parameter is small enough, and
<br><p></p>
<div align="CENTER">
<img width="67" height="31" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img8.gif" alt="\begin{displaymath}\vert\vert\mbox{\boldmath $\beta$}\vert\vert 
< \tau,\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
which terminates when the norm of the gradient of the sum of squares
with respect to each parameter is small enough. However, these criteria
were found to behave badly from time to time. More specifically,
situations arose where it was impossible to meet these criteria,
causing the program to loop endlessly.</p>

<p>
13 The Levenberg-Marquardt algorithm was implemented in the program with 
the following settings:
<ul>
<li>The starting value of <img width="15" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img9.gif" alt="$\lambda$">,
the mediating factor between <i>Gauss-Newton</i> and <i>Steepest 
Descent</i>, was 0.001.
<li>The factor 
<img width="15" height="30" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img10.gif" alt="$\gamma$"> by which to change <img width="15" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img9.gif" alt="$\lambda$">
was 10.
<li>The tolerance <img width="14" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img6.gif" alt="$\tau$"> for stopping rule was 0.00001.
</ul>
The starting value of <img width="15" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img9.gif" alt="$\lambda$">
and the factor <img width="15" height="30" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img10.gif" alt="$\gamma$">
were suggested by <a href="#press">Press et al. (1992)</a>. The 
tolerance <img width="14" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img6.gif" alt="$\tau$">
was adjusted so that it was small enough to ensure accurate estimates, but 
not so small that the program took too long to complete the algorithm.

<p>

<h1>4. Regression Functions in the Program</h1>

<p>14 <a href="#table1">Table 1</a> lists all of the regression
functions and their parameterizations used in the program. Models
included in <i>Visual Fit</i> were ones whose parameters (a) made
physical sense and could be interpreted by the user in a logical
manner, and (b) could be represented by the program in a way that
accurately depicted the parameter's meaning.  For example, the
following logistic model has parameters that are sufficiently
understandable and representable:

<br><p></p>
<div align="CENTER">
<img width="162" height="44" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img15.gif" alt="\begin{displaymath}f(x)=\frac{a}{1+e^{\frac{4m}{a}(x_h-x)}}\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
This parameterization is included in <i>Visual Fit</i>.  As described
in Table 1, <i>a</i> represents the maximum height of the function,
<i>x</i><sub><i>h</i></sub> is the value of <i>x</i> at which the
function equals <i>a</i>/2, and <i>m</i> represents the slope of the
function at <nobr><i>x</i> = <i>x</i><sub><i>h</i></sub></nobr>.</p>

<a name="table1">
 <hr>
 <p><strong>Table 1.</strong> List of Functions and Parameterizations Used
 in <i>Visual Fit</i></p>
 <table border="4" cellspacing="1" cellpadding="6">
   <tr>
     <th align="LEFT"><b>Function</b></th>
     <th align="LEFT"><b>Parameterization</b></th>
     <th align="LEFT" valign="TOP" width="156">
<b>Description of Parameters</b></th>
   </tr>
  <tr>
     <td align="left" rowspan="2" valign="top">Linear</td>
     <td align="LEFT" valign="top"><i>f</i>(<i>x</i>) = <i>a</i> + <i>bx</i></td>
     <td align="LEFT" valign="TOP" width="156"><i>a</i> - <i>y</i>-intercept <br>
     <i>b</i> - Slope of the line</td>
   </tr>
   <tr>
     <td align="LEFT" valign="top"><img width="155" height="34" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img11.gif" alt="$f(x)=a+b(x-\bar{x})$"></td>
     <td align="LEFT" valign="TOP" width="156"><i>a</i> - Height of the 
function at <img width="48" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img12.gif" alt="$x=\bar{x}$"> <br>
     <i>b</i> - Slope of the line</td>
   </tr>
   <tr>
      <td align="LEFT" valign="top">Quadratic</td>
      <td align="LEFT" valign="top"><img width="246" height="37" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img13.gif" alt="$f(x)=a+b(x-\bar{x})+c(x-\bar{x})^2$"></td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - 
Height of the function at <img width="48" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img12.gif" alt="$x=\bar{x}$"> <br>
      <i>b</i> - Slope of the function at <img width="48" height="16" align="BOTTOM" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img12.gif" alt="$x=\bar{x}$"> <br>
      <i>c</i> - Quadratic effect</td>
    </tr>
    <tr>
      <td align="left" rowspan="3" valign="top">Exponential</td>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) 
= <i>a</i>(1 - <i>e</i><sup>-<i>bx</i></sup>)</td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - 
Maximum height of the function <br>
      <i>b</i> - Rate of approach towards <i>a</i></td>
    </tr>
    <tr>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) 
= <i>a</i>(1 - 2<sup>-<i>x</i>/<i>x<sub>h</sub></i></sup>)</td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - 
Maximum height of the function <br>
      <i>x<sub>h</sub></i> - Value of <i>x</i> at which the function 
equals <i>a</i>/2</td>
    </tr>
    <tr>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) 
= <i>a</i>(1 - <i>e</i><sup>-<i>dx</i>/<i>a</i></sup>)</td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - 
Maximum height of the function <br>
      <i>d</i> - Slope of the function at origin</td>
    </tr>
    <tr>
      <td align="left" rowspan="3" valign="top">Exponential with Intercept</td>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) = <i>a</i>(1 
- <i>e</i><sup>-<i>bx</i></sup>) + <i>c</i></td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - Maximum 
height (from <i>c</i>) of the
      function <br>
      <i>b</i> - Rate of approach towards <i>a</i> <br>
      <i>c</i> - <i>y</i>-intercept</td>
    </tr>
    <tr>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) = <i>a</i>(1 
- 2<sup>-<i>x</i>/<i>x<sub>h</sub></i></sup>) + <i>c</i></td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - Maximum 
height (from <i>c</i>) of the
      function <br>
      <i>x<sub>h</sub></i> - Value of <i>x</i> at which the function 
equals <nobr><i>a</i>/2+<i>c</i></nobr><br>
      <i>c</i> - <i>y</i>-intercept</td>
    </tr>
    <tr>
      <td align="left" valign="top"><i>f</i>(<i>x</i>) = <i>a</i>(1 
- <i>e</i><sup>-<i>dx</i>/<i>a</i></sup>) + <i>c</i></td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - Maximum height 
(from <i>c</i>) of the function <br>
      <i>d</i> - Slope of the function at origin <br>
      <i>c</i> - <i>y</i>-intercept</td>
    </tr>
    <tr>
      <td align="left" valign="top">Logistic</td>
      <td align="left" valign="top"><img width="149" height="34" align="MIDDLE" border="0" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img14.gif" alt="$f(x)=\frac{a}{1+e^{\frac{4m}{a}(x_h-x)}}$"></td>
      <td align="LEFT" valign="TOP" width="156"><i>a</i> - 
Maximum height of the function <br>
      <i>x<sub>h</sub></i> - Value of <i>x</i> at which the function 
equals <i>a</i>/2 <br>
      <i>m</i> - Slope of function at <nobr><i>x</i> 
= <i>x<sub>h</sub></i></nobr></td>
    </tr>
  </table>
  <p><hr></p>

<p>
15 Under a different parameterization, the logistic model may
be more difficult to interpret. In this second model, shown
below, the parameters are more difficult to represent and
interpret: <br><p></p>
<div align="CENTER">
<img width="149" height="41" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img16.gif" alt="\begin{displaymath}f(x)=\frac{a}{1+e^{-(b+cx)}}\end{displaymath}">
</div>
<br clear="ALL">
<p></p>
Parameters <i>b</i>
and <i>c</i> do not have a physical interpretation that is
sufficient for representation within <i>Visual Fit</i>.
Therefore this parameterization was not included in the
program.</p>

<p>16 The definition and behavior of a parameter are conveyed
to the user by (a) the movement of the parameter box, (b)
description of the parameter which may be brought up in
the message area at any time, and (c) reference lines that
may be drawn on the graph to convey some relationship
between the graph and a parameter.  (Reference lines are
gray in color; lines that convey a mathematical
interpretation are pink.) Representation of a parameter
will consist of these elements. Together they help the user
understand the parameters in the model.</p>

<p>17 Certain kinds of parameters that are similar in
nature are represented by <i>Visual Fit</i> in the same
way. Some may have an obvious method of representation.
Parameters that denote some specific <i>x</i> or <i>y</i>
value related to the function are the easiest to represent.
For example, the parameter <i>a</i> of the linear model
<br><p></p>
<div align="CENTER">
<i>f</i>(<i>x</i>) = <i>a</i> + <i>bx</i>
</div>
<br clear="ALL">
<p></p>
represents the <i>y</i>-intercept, or value of <i>y</i> where <i>x</i>
= 0. This is simply controlled by a parameter box which lies on the
point where the line crosses the <i>y</i>-axis and moves only
vertically.  Another example is the parameter
<i>x</i><sub><i>h</i></sub> of the model
<br><p></p>
<div align="CENTER">
<i>f</i>(<i>x</i>) 
= <i>a</i>(1 - <i>e</i><sup>-<i>x</i>/<i>x</i><sub><i>h</i></sub></sup>).
</div>
<br clear="ALL">
<p></p>
<i>x</i><sub><i>h</i></sub> represents the <i>x</i> value at which the
function is equal to <i>a</i>/2. This parameter is controlled by a box
that moves along the <i>x</i>-axis. Reference lines are drawn on the
graph to show the relationship between the parameter box and the
function (Figure 1).</p>

<a name="figure1"><hr></a>
<br><a href="taur01.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur01.icon.gif" width="309" height="160">Figure 1 (2.0K gif)</a>
<p>
Figure 1. Horizontal Reference Lines.  Reference lines are drawn on
the graph to help convey the meaning of the parameters.</p>
<hr>


<p> 18 Similarly, parameters that represent lengths in the
scale of <i>x</i> or <i>y</i> are represented by placing
the parameter box on one end of the length that the
parameter denotes. In the model <br><p></p> <div align="CENTER">

<i>f</i>(<i>x</i>) = <i>a</i>(1 - <i>e</i><sup>-<i>bx</i></sup>) + <i>c</i>,
</div>
<br clear="ALL">
<p></p>
the parameter <i>a</i> represents the length on the <i>y</i> scale
between the function's height at <i>x</i> = 0 and the asymptote
approached by the function as <i>x</i> approaches infinity. In this
case, a box is placed at the asymptote, <nobr><i>y</i> = <i>a</i> +
<i>c</i></nobr>, and the length it represents is labeled on the graph
(Figure 2).</p>

<a name="figure2"><hr></a>
<br><a href="taur02.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur02.icon.gif" width="309" height="160">Figure 2 (2.0K gif)</a>
<p>
Figure 2. Vertical Reference Lines.  The vertical reference line indicates 
the distance represented by <nobr>parameter <i>a</i>.</nobr>
</p>
<hr>


<p>19 Parameters that denote the derivative or slope at a
certain point on the function are a little bit more
complicated. Slope parameters are controlled by parameter
box controls that move in a circle around a set point on
the function. All slope parameters are controlled this way.
This will let users see the similarity between the slope of
a straight line and one from a more complex model.</p>

<p>20 Other function parameters may be more difficult to
portray. One of the more complicated representations was
used in the exponential model
<br><p></p>
<div align="CENTER">
<i>f</i>(<i>x</i>) = <i>a</i>(1 - <i>e</i><sup>-<i>bx</i></sup>).
</div>
<br clear="ALL">
<p></p>
In this parameterization, the parameter <i>b</i> may be
difficult to interpret. Users may understand by inspection
or manipulation that <i>b</i> is somehow responsible for
how quickly the function approaches its asymptote, but they
may not have a physical perception of its relationship to
the function. In this case we have decided to let users see
the parameter <i>b</i> as a quantity that is proportional
to the ratio between two lengths on the <i>y</i> scale, 
<nobr><i>a</i> - <i>f</i>(<i>x</i><sub>1</sub>)</nobr> and  <nobr><i>a</i> -
<i>f</i>(<i>x</i><sub>2</sub>)</nobr>, where <i>x</i><sub>1</sub>
and <i>x</i><sub>2</sub> are arbitrary values for <i>x</i>
that are close together. This relationship was an
approximation taken from the differential equation by which
<i>b</i> was originally defined in this model:
<p>
<div align="CENTER">
<img width="266" height="137" src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur.img17.gif" alt="\begin{eqnarray*}
b&amp;=&amp;-\frac{d}{dx}\log (a-f(x))\\
&amp;=&amp;-\frac{1}{a-f(x)}\frac{d}{dx}(a-f(x))\\
&amp;\approx&amp;-\frac{(a-f(x_1))-(a-f(x_2))}{\Delta x(a-f(x_1))}.
\end{eqnarray*}">
</div></p>
while <i>b</i> is more naturally interpreted on a different
scale (the log of <i>a</i> - <i>f</i>(<i>x</i>)), this
representation of <i>b</i> allows its interpretation on the
<i>x</i>-<i>y</i> scale. These lengths are indicated by two
pink lines. The parameter box controls the length of 
<i>a</i> - <i>f</i>(<i>x</i><sub>1</sub>), the numerator of
this ratio of lengths. The parameter description indicates
the relationship described (Figure 3).</p>

<a name="figure3"><hr></a>
<br><a href="taur03.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur03.icon.gif" width="309" height="160">Figure 3 (2.0K gif)</a>
<p>
Figure 3. Representation of a Complicated Parameter. In this model, 
<i>f</i>(<i>x</i>) = <i>a</i>(1 - <i>e</i><sup>-<i>bx</i></sup>), the
parameter <i>b</i> is described as a ratio between the lengths of the two pink
lines.
</p>
<hr>


<p>21 Obviously, there may be many different ways to
represent a parameter. The choice of how a parameter is to
be depicted should involve a decision about what aspect of
the parameter's behavior we would like to elucidate, and
whether this aspect can be illustrated by parameter box
controls. In deciding upon a method of representation, care
should be taken not to use any depiction that is more
descriptive of some other parameterization of the same
function. Such a representation would not be an accurate
portrayal of the actual parameter being changed.</p>

<p>

<h1>5. Program Structure</h1> 

<p>22 This program was written in
Java, an object-oriented language that was developed and
released by <a href="gate/taurlink2.html">Sun 
Microsystems, Inc.</a> in 1995. Java has
received much attention from the business community, due to
its innovative ability to run dynamically from Web pages.
Java was chosen primarily for its robust nature; it was
possible to perform tasks through Java a number of
different ways. Java programs are easily placed on Web
pages and are also extremely platform independent; that is,
they can be run on different operating systems. Other
development platforms were considered, such as C++ and
Lisp-Stat. These languages have implementations that would
have made the graphics and computations in
<i>VisualFit</i> easier. However, we decided to use Java
for its superior compatibility across platforms and the fact that 
all major Web browsers have a Java
run-time. (We discuss some of the difficulties associated
with Java in the <i>Discussion and Conclusions</i>
section.)

<p>23 A copy of this program's code is available at the
<i>Visual Fit</i> Web page (see the next section). The
program's basic structure is composed of three main
object-oriented classes: <tt>VisualFit</tt>,
<tt>Function</tt>, and <tt>Graph</tt>. <tt>Graph</tt>
handles the drawing of the graph, <tt>Function</tt> houses
all of the variables and methods pertaining to the data,
the trial fit, and each of the regression models and
associated details (e.g., partial derivatives, parameter
values, location of parameter boxes), and <tt>VisualFit</tt>
holds the entire program together by controlling
communication among all of the classes. Table 2 provides
a brief description of each class. These classes
are defined in files called <i>Java class files</i>. All
are necessary for the program to execute correctly.</p>

<p><hr></p>

<strong><p><a name="table2">Table 2.</strong>
List of Java Classes Comprising <i> Visual Fit</i></p>

<table border="4" cellspacing="1" cellpadding="6">

<tr><th align="LEFT"><b>Class name</b></th>
<th align="LEFT" valign="TOP" width="340"><b>Description</b></th>
</tr>
<tr><td align="LEFT"><tt>VisualFit</tt></td>
<td align="LEFT" valign="TOP" width="340">Main body of program. 
Handles most user actions.</td>
</tr>
<tr><td align="LEFT"><tt>Function</tt></td>
<td align="LEFT" valign="TOP" width="340">Performs all of the actions 
specific for the data, the trial fit, and each regression model.</td>
</tr>
<tr><td align="LEFT"><tt>Graph</tt></td>
<td align="LEFT" valign="TOP" width="340">Manages the scatterplot graph. 
Also controls the mouse interface with parameter box controls.</td>
</tr>
<tr><td align="LEFT"><tt>ControlPanel</tt></td>
<td align="LEFT" valign="TOP" width="340">Manages the control panel next 
to the graph.</td>
</tr>
<tr><td align="LEFT"><tt>Convert</tt></td>
<td align="LEFT" valign="TOP" width="340">Converts back and forth between 
the graph's continuous coordinates and the screen's pixel coordinates.</td>
</tr>
<tr><td align="LEFT"><tt>Format</tt></td>
<td align="LEFT" valign="TOP" width="340">Controls number formatting (written 
by Cay Horstmann, Sun Microsystems, Inc.).</td>
</tr>
<tr><td align="LEFT"><tt>MessageArea</tt></td>
<td align="LEFT" valign="TOP" width="340">Controls the message panel on 
the side.</td>
</tr>
<tr><td align="LEFT"><tt>SSBar</tt></td>
<td align="LEFT" valign="TOP" width="340">Calculates and draws the sum 
of squares bar.</td>
</tr>
<tr><td align="LEFT"><tt>ArrayOp</tt></td>
<td align="LEFT" valign="TOP" width="340">A set of functions used 
for manipulating arrays.</td>
</tr>
<tr><td align="LEFT"><tt>VisualFitFrame</tt></td>
<td align="LEFT" valign="TOP" width="340">A frame that houses the applet 
in <i>VisualFit</i>. Only used when program is run as a stand-alone.</td>
</tr>
<tr><td align="LEFT"><tt>Generate</tt></td>
<td align="LEFT" valign="TOP" width="340">Performs all of the necessary 
random number generation.</td>
</tr>
<tr><td align="LEFT"><tt>Sort</tt></td>
<td align="LEFT" valign="TOP" width="340">Performs all of the necessary 
data sorting.</td>
</tr>
</table>
</td></tr>
</table>

<p><hr></p>


<h1>6. Program Usage</h1>

<p>24 This program can be run locally on a computer by
obtaining all 12 class files (listed in the previous
section) and a <i>Java interpreter</i>, which is a program
that is able to run Java programs by interfacing with Java
class files. Sun Microsystems' <i>Java Development Kit</i>
(<i>JDK</i>) is an example of such a program.</p>

<p>
25 However, the easiest way to run the program is to
execute it as an applet, or, in other words, to access the
program through a Web browser such as Netscape Navigator.
<i>Visual Fit</i> is available at</p>

<center>
<a href="visualfit.html">
http://www.amstat.org/publications/jse/secure/v7n2/visualfit.html
</a></center>

<p>Click on &quot;Start Visual Fit,&quot; and the program will begin.
This method will work from a Web page as long as the Web
browser is <i>Java compliant</i>. Most users will not have
a problem with this; almost all Web browsers have Java
capabilities.</p>

<p>26 It should be noted that, on slower machines, users may
experience a slight lag whenever parameter box controls are
moved. <i>Visual Fit</i> was written and tested primarily
on a Windows 95 platform. Other platforms seem to have no
trouble running <i>Visual Fit</i>. However, performance on
these platforms has not been tested as extensively. It
should also be noted that when the program executes under a
Web page, performance may be worse than when running the
program locally. Specifically this refers to the lag of
parameter box controls mentioned previously.</p>

<p>27 When the program starts, a dataset and model are
immediately displayed (<a href="#figure4">Figure 4</a>).
Fit the dataset by changing the values of the parameters in
the model. This can be done by either dragging the
parameter box controls or by typing new values on the
control panel (<a href="#figure5">Figure 5</a>). The sum of
squares is displayed so that the user may observe the
effect of changing the parameters and gauge the quality of
the fit. When finished fitting the model to the data, click
on the &quot;Least Squares Line&quot; button. The program will
display the actual least squares solution (calculated using
Levenberg-Marquardt) as a red line on the same graph as the
user's trial fit. The message area on the side displays a
comparison between the two fits (<a href="#figure6">Figure
6</a>). To look at another dataset, click on &quot;Generate
Data.&quot; The program will generate another dataset using the
same model.</p>

<a name="figure4"><hr></a>
<br><a href="taur04.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur04.icon.gif" width="277" height="213">Figure 4 (16.0K gif)</a>
<p>
Figure 4. Start of the Visual Fit Applet.
</p>


<a name="figure5"><hr></a>
<br><a href="taur05.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur05.icon.gif" width="273" height="211">Figure 5 (18.0K gif)</a>
<p>
Figure 5. Changing Model Parameters.  Parameters may be controlled by 
dragging their corresponding parameter box controls.
</p>

<a name="figure6"><hr></a>
<br><a href="taur06.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur06.icon.gif" width="277" height="214">Figure 6 (18.0K gif)</a>
<p>
Figure 6. Comparison With Least Squares.  Users' estimated parameters 
can be compared with least squares estimates.
</p>
<hr>

<p> 28 Similarly, clicking the &quot;True Population Line&quot;
button will cause <i>Visual Fit</i> to display the actual
line used to generate the dataset. This can help users to
understand the difference between the true population line
and the least squares line.</p>

<p>29 Different parameterizations of the functions may be
selected from the &quot;Parameterization&quot; list.
<i> Visual Fit</i> will automatically convert all
parameters. This can be done either before or after the
answer is displayed. A description of these
parameterizations may be viewed at any time by clicking on
&quot;Describe Parameters.&quot; The descriptions appear in the
message area on the side.</p>

<p>30 To switch to a different regression function, choose
from those listed in the &quot;Function&quot; pull-down menu. The
program will respond by updating the trial function and the
values displayed in the bottom panel.</p>

<p>31 The scale of the graph can be changed at any time by
clicking on the rescaling buttons located below the graph.
This should be done if the user finds fitting the function
to be easier at a different graph scale.</p>

<p>32 Additional features of <i>Visual Fit</i> include a
choice of sample size and error distribution. Users can
have the program generate datasets with errors that are not
i.i.d. normal. For example, datasets with extreme outliers
may be generated (Figure 7).</p>


<a name="figure7"><hr></a>
<br><a href="taur07.gif">
<img src="/web/20130307064459im_/http://www.amstat.org/publications/jse/secure/v7n2/taur07.icon.gif" width="277" height="213">Figure 7 (17.0K gif)</a>
<p>
Figure 7. A Dataset With an Outlier.  Outliers and other 
irregularities may be generated.
</p>
<hr>


<p>

<h1>7. Discussion and Conclusions</h1>

<p>33 The fact that Java is a very new language and is still
undergoing constant change meant that its graphical user
interface capabilities were somewhat limited, when compared
with other development platforms, such as Visual C++ or
Visual Basic. Visual layout of the program turned out to be
surprisingly difficult, and certain features, such as spin
buttons and print capability, were unavailable. It should
be noted that Java 1.1 (and above) does address some of the
problems mentioned above, such as printing. However,
<i>Visual Fit</i> was written using Java 1.0.2, a less-than-current
version. This was done so that <i>Visual
Fit</i> would enjoy compatibility with a broader range of
Web browsers, since some browsers do not support the new
version of Java (e.g., Netscape 3.0 and lower).</p>

<p>34 It was observed that there was an occasional lack of
convergence from the Levenberg-Marquardt algorithm when the
data were not generated from the model being fit. However,
this is infrequent if the user makes a minimally reasonable
guess, since the applet uses the inputted parameters as a
starting point for the algorithm.</p>

<p>35 This program uses the model parameters from which the
data were generated as the values for  <b>a</b><sub>0</sub>,
the initial guess at the parameters for
Levenberg-Marquardt. This was a natural choice for 
<b>a</b><sub>0</sub>; the generation parameters are almost
always a very good guess for the least squares estimates.
However, in the extremely exceptional case that the user's
estimate provides a smaller sum of squares than the one
initially calculated, <i>Visual Fit</i> will use the user's
inputted parameters for  <b>a</b><sub>0</sub>.</p>

<p>36 For parameters of many models, providing an
interpretation on the scale of the graph was often
extremely difficult. Other parameters cannot be represented
this way at all. For a particular model, we needed to
consider whether <i>Visual Fit</i> would be able to explain
the parameters to users in the manner intended. If the
intention is to explain the parameters on a completely
different scale, or if the graph-scale interpretation is
too complex to provide a good understanding of the
parameter's meaning, then these parameters are not
well-explained by the methods employed by <i>Visual
Fit</i>. Models with these parameters were not included in
the program.</p>

<p>37 While nonlinear regression computations are relatively
difficult, this program can help students to see that the
main ideas behind linear model fitting also apply to
nonlinear model fitting. This program attempts to
concentrate more on the similarities between the two,
rather than the extra difficulties associated with
nonlinear regression. Students will see that linear
regression and nonlinear regression are alike on a
conceptual level.</p>

<p><hr></p>

<h1>References</h1>

<p>
<a name="devore">
Devore, J., and Peck, R. (1993)</a>, <cite>Statistics: The Exploration 
and Analysis of Data</cite> (2nd ed.), Belmont, CA: Duxbury Press.</p>

<p><a name="kennedy">
Kennedy, W. J., and Gentle, J. E. (1980)</a>, <cite>Statistical 
Computing</cite>, New York: Marcel Dekker.</p>

<p><a name="moore">
Moore, D. S., and McCabe, G. P. (1993)</a>, <cite>Introduction to the 
Practice of Statistics</cite> (2nd ed.), New York: W. H. Freeman and 
Company.</p>

<p><a name="ott">
Ott, R. L. (1993)</a>, <cite>An Introduction to Statistical Methods and 
Data Analysis</cite> (4th ed.), Belmont, CA: Duxbury Press.</p>

<p><a name="press">
Press, W. H., Teukolsky, S. A., Vetterling, W. T., and Flannery, B. P.
(1992)</a>, <cite>Numerical Recipes in C: The Art of Scientific
Computing</cite> (2nd ed.), New York: Cambridge University Press.</p>

<p><a name="snedecor">
Snedecor, G. W., and Cochran, W. G. (1989)</a>, <cite>Statistical 
Methods</cite> (8th ed.), Ames, IA: Iowa State University Press.</p>

<hr>
<p>
Ying Taur<br>
11 Finch Lane<br>
Bedford, NY 10506<br>
<address>ying_taur@nymc.edu</address></p>
<p>
Charles E. McCulloch<br>
Department of Statistical Science<br>
439 Warren Hall<br>
Cornell University<br>
Ithaca, NY 14853-7801<br>
<address>cem1@cornell.edu</address>
</p>
<hr>

<p align="center"><font face="Arial"><small>
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/index.html">JSE Homepage</a> | 
<a href="https://web.archive.org/web/20130307064459/https://www.amstat.org/publications/jse/JSEForm.htm">Subscription
Information</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/contents.cfm">Current Issue</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/toc.html">JSE Archive (1993-1998)</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/archive.htm">Data Archive</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/jindex.html">Index</a> | Search JSE | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/information.html">JSE Information Service</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/board.html">Editorial Board</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/jse/ifa.html">Information for Authors</a> | 
<a href="https://web.archive.org/web/20130307064459/mailto:journals@amstat.org">Contact JSE</a> | 
<a href="/web/20130307064459/http://www.amstat.org/publications/">ASA Publications</a></small></font></p>

</body>
</html>
<!--
     FILE ARCHIVED ON 06:44:59 Mar 07, 2013 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 17:28:58 Nov 02, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 206.346
  exclusion.robots: 0.3
  exclusion.robots.policy: 0.287
  RedisCDXSource: 0.774
  esindex: 0.014
  LoadShardBlock: 177.299 (3)
  PetaboxLoader3.datanode: 186.957 (4)
  CDXLines.iter: 23.831 (3)
  load_resource: 56.884
  PetaboxLoader3.resolve: 27.353
-->